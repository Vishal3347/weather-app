<!DOCTYPE html>
<html lang="en" data-theme="dark">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>WeatherNow â€“ Live Forecast + AI</title>
  <meta name="description"
    content="Get real-time weather forecasts for any city. Features 5-day forecast, AI-powered weather assistant, dark/light mode, and unit toggling." />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;500;600;700;800&family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;1,9..40,300&display=swap"
    rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
</head>

<body>

  <header class="header">
    <div class="logo">
      <span class="logo-icon">â›…</span>
      <span class="logo-text">WeatherNow</span>
      <span class="ai-badge">+ AI</span>
    </div>
    <div class="controls">
      <button id="unit-toggle" class="control-btn" aria-label="Toggle temperature unit">Â°F</button>
      <button id="theme-toggle" class="control-btn" aria-label="Toggle dark/light mode">â˜€ï¸</button>
    </div>
  </header>

  <main class="main">

    <!-- Search Section -->
    <section class="search-section" aria-label="City search">
      <div class="search-container">
        <div class="search-box">
          <span class="search-icon">ğŸ”</span>
          <input type="text" id="search-input" class="search-input" placeholder="Search for a cityâ€¦" autocomplete="off"
            aria-label="Enter city name" />
          <button id="search-btn" class="search-btn" aria-label="Search">Search</button>
        </div>
        <button id="geo-btn" class="geo-btn" aria-label="Use my location">ğŸ“ Use My Location</button>
      </div>
      <div id="recent-searches" class="recent-searches" aria-label="Recent searches"></div>
    </section>

    <!-- Loading Spinner -->
    <div id="loader" class="loader hidden" aria-live="polite">
      <div class="spinner"></div>
      <p class="loader-text">Fetching weather dataâ€¦</p>
    </div>

    <!-- Error Message -->
    <div id="error-msg" class="error-msg hidden" role="alert">
      <span class="error-icon">âš ï¸</span>
      <span id="error-text">City not found. Please try again.</span>
    </div>

    <!-- Weather Card (Current Weather) -->
    <section id="weather-card" class="weather-card hidden" aria-label="Current weather">

      <div class="card-header">
        <div>
          <h1 id="city-name" class="city-name">â€”</h1>
          <p id="date-time" class="date-time">â€”</p>
        </div>
        <img id="weather-icon" class="weather-icon" src="" alt="Weather icon" />
      </div>

      <div class="temp-section">
        <span id="temperature" class="temperature">â€”</span>
        <div class="temp-meta">
          <p id="weather-desc" class="weather-desc">â€”</p>
          <p id="feels-like" class="feels-like">Feels like â€”</p>
        </div>
      </div>

      <div class="stats-row">
        <div class="stat-item">
          <span class="stat-icon">ğŸ’§</span>
          <span class="stat-label">Humidity</span>
          <span id="humidity" class="stat-value">â€”</span>
        </div>
        <div class="stat-item">
          <span class="stat-icon">ğŸ’¨</span>
          <span class="stat-label">Wind</span>
          <span id="wind-speed" class="stat-value">â€”</span>
        </div>
        <div class="stat-item">
          <span class="stat-icon">ğŸ‘ï¸</span>
          <span class="stat-label">Visibility</span>
          <span id="visibility" class="stat-value">â€”</span>
        </div>
        <div class="stat-item">
          <span class="stat-icon">ğŸ”µ</span>
          <span class="stat-label">Pressure</span>
          <span id="pressure" class="stat-value">â€”</span>
        </div>
      </div>

      <!-- 5-Day Forecast -->
      <div class="forecast-section">
        <h2 class="forecast-title">5-Day Forecast</h2>
        <div id="forecast-grid" class="forecast-grid"></div>
      </div>

      <!-- ============================================================
           AI WEATHER ASSISTANT PANEL (new)
      ============================================================ -->
      <div class="ai-panel" id="ai-panel">
        <div class="ai-panel-header">
          <div class="ai-panel-title">
            <span class="ai-sparkle">âœ¦</span>
            <span>AI Weather Assistant</span>
            <span class="ai-model-tag">Claude</span>
          </div>
          <button class="ai-panel-toggle" id="ai-toggle-btn" aria-label="Toggle AI panel">
            <span class="ai-chevron">â–¾</span>
          </button>
        </div>

        <div class="ai-panel-body" id="ai-panel-body">

          <!-- Auto-generated insight (fires on weather load) -->
          <div class="ai-insight-box" id="ai-insight-box">
            <div class="ai-insight-loading hidden" id="ai-insight-loading">
              <div class="ai-dots"><span></span><span></span><span></span></div>
              <span>Analyzing conditionsâ€¦</span>
            </div>
            <div class="ai-insight-content" id="ai-insight-content">
              <span class="ai-insight-placeholder">Weather insight will appear here after searching a city.</span>
            </div>
          </div>

          <!-- Divider -->
          <div class="ai-divider">
            <span>Ask anything</span>
          </div>

          <!-- Chat window -->
          <div class="ai-chat-window" id="ai-chat-window">
            <!-- messages injected here -->
          </div>

          <!-- Chat Input -->
          <div class="ai-chat-input-row">
            <input type="text" id="ai-chat-input" class="ai-chat-input"
              placeholder="e.g. Should I carry an umbrella today?" />
            <button id="ai-send-btn" class="ai-send-btn" aria-label="Send message">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                <line x1="22" y1="2" x2="11" y2="13"></line>
                <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
              </svg>
            </button>
          </div>

          <!-- Quick prompts -->
          <div class="ai-quick-prompts" id="ai-quick-prompts">
            <button class="ai-quick-btn">ğŸƒ Good day to exercise?</button>
            <button class="ai-quick-btn">ğŸ‘• What should I wear?</button>
            <button class="ai-quick-btn">ğŸš— Driving conditions?</button>
            <button class="ai-quick-btn">â˜‚ï¸ Rain likely today?</button>
          </div>

        </div>
      </div>
      <!-- END AI PANEL -->

    </section>

    <!-- Welcome / Empty State -->
    <div id="empty-state" class="empty-state" aria-label="Welcome message">
      <div class="empty-icon">ğŸŒ¤ï¸</div>
      <h2 class="empty-title">Welcome to WeatherNow</h2>
      <p class="empty-subtitle">Search for any city or use your location to get started.</p>
      <p class="empty-ai-hint">âœ¦ Powered by AI â€” ask any weather question after searching</p>
    </div>

  </main>

  <script src="config.js"></script>
  <script src="script.js"></script>
</body>

</html>
